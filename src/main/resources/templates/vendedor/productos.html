<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
	  xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<title>Productos - Sistema de Ventas</title>
	<script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="flex bg-gray-100 min-h-screen font-sans">

<!-- Sidebar -->
<aside class="w-64 bg-gray-800 text-white flex flex-col py-6 px-4">
	<h2 class="text-xl font-bold mb-6 text-center">Sistema de Ventas</h2>
	<nav class="space-y-2">
		<a href="/dashboard" class="block hover:bg-gray-700 p-2 rounded">ğŸ  Inicio</a>
		<a th:href="@{/clientes}" class="block hover:bg-gray-700 p-2 rounded">ğŸ‘¥ Clientes</a>
		<a th:href="@{/productos}" class="block hover:bg-gray-700 p-2 rounded"  sec:authorize="hasRole('ADMIN')">ğŸ“¦ Productos</a>
		<a th:href="@{/ventas}" class="block hover:bg-gray-700 p-2 rounded">ğŸ’° Ventas</a>
		<a href="/reportes" class="block hover:bg-gray-700 p-2 rounded"  sec:authorize="hasRole('ADMIN')" >ğŸ“Š Reportes</a>
		<a th:href="@{/admin/gestionUsuario/nuevo}" class="block hover:bg-gray-700 p-2 rounded" sec:authorize="hasRole('ADMIN')">ğŸ” Gestionar Usuarios</a>
		<a th:href="@{/logout}" class="block text-red-400 hover:text-red-200 p-2 rounded">ğŸšª Cerrar SesiÃ³n</a>
	</nav>
</aside>



<!-- Contenido principal -->
<main class="flex-1 p-8 overflow-auto bg-gray-50">

	<!-- Formulario de Producto -->
	<form th:action="@{/productos/guardar}" method="post" th:object="${producto}" class="bg-white p-8 rounded-xl shadow-lg max-w-2xl mx-auto mb-10 space-y-6 border border-gray-200 hover:shadow-xl transition">
		<h2 class="text-2xl font-bold text-gray-800 text-center mb-4">ğŸ“ Registro de Producto</h2>

		<input type="hidden" th:field="*{id}" />

		<div>
			<label class="block text-sm font-semibold text-gray-700 mb-1">CÃ³digo del Producto</label>
			<input type="text" th:field="*{codigo}" class="w-full border px-4 py-2 rounded-lg border-gray-300 focus:ring-2 focus:ring-gray-800 focus:outline-none" placeholder="Ej. PT-N1" />
		</div>

		<div>
			<label class="block text-sm font-semibold text-gray-700 mb-1">Nombre del Producto</label>
			<input type="text" th:field="*{nombre}" class="w-full border px-4 py-2 rounded-lg border-gray-300 focus:ring-2 focus:ring-gray-800 focus:outline-none" placeholder="Ej. PantalÃ³n Deportivo Negro" />
		</div>

		<div class="grid grid-cols-2 gap-6">
			<div>
				<label class="block text-sm font-semibold text-gray-700 mb-1">Precio</label>
				<input type="number" step="0.01" th:field="*{precio}" class="w-full border px-4 py-2 rounded-lg border-gray-300 focus:ring-2 focus:ring-gray-800 focus:outline-none" placeholder="Ej. 99.99" />
			</div>
			<div>
				<label class="block text-sm font-semibold text-gray-700 mb-1">Stock</label>
				<input type="number" th:field="*{stock}" class="w-full border px-4 py-2 rounded-lg border-gray-300 focus:ring-2 focus:ring-gray-800 focus:outline-none" placeholder="Ej. 15" />
			</div>
		</div>

		<div>
			<label class="block text-sm font-semibold text-gray-700 mb-1">CategorÃ­a</label>
			<select th:field="*{categoria}" class="w-full border px-4 py-2 rounded-lg border-gray-300 focus:ring-2 focus:ring-gray-800 focus:outline-none">
				<option value="">Seleccione una categorÃ­a</option>
				<option value="articulos">ArtÃ­culos</option>
				<option value="ropa">Ropa</option>
				<option value="suplementos">Suplementos</option>
				<option value="accesorios">Accesorios</option>
				<option value="otros">Otros</option>
			</select>
		</div>

		<div class="flex justify-center gap-x-4">
			<button type="submit" class="bg-gray-800 hover:bg-gray-700 text-white font-semibold py-3 px-6 rounded-lg shadow-sm transition hover:scale-105">
				ğŸ’¾ Guardar Producto
			</button>
			<button href="/productos" class="bg-red-500 hover:bg-red-600 text-white font-semibold py-3 px-6 rounded-lg shadow-sm transition hover:scale-105">
				âŒ Cancelar
			</button>
		</div>
	</form>

	<!-- Tabla de productos -->
	<div class="bg-white p-6 rounded-lg shadow-md max-w-6xl mx-auto border border-gray-200">
		<h2 class="text-xl font-semibold text-gray-800 mb-4">Listado de Productos</h2>
		<table class="min-w-full text-sm">
			<thead class="bg-gray-200 text-gray-800 font-semibold">
			<tr>
				<th class="px-4 py-2 text-left">#</th>
				<th class="px-4 py-2 text-left">CÃ³digo</th>
				<th class="px-4 py-2 text-left">Nombre</th>
				<th class="px-4 py-2 text-left">CategorÃ­a</th>
				<th class="px-4 py-2 text-left">Precio</th>
				<th class="px-4 py-2 text-left">Stock</th>
				<th class="px-4 py-2 text-left">Acciones</th>
			</tr>
			</thead>
			<tbody class="text-gray-700" th:each="p, iterStat : ${productos}">
			<tr class="hover:bg-gray-50">
				<td class="px-4 py-2" th:text="${iterStat.count}">1</td>
				<td class="px-4 py-2" th:text="${p.codigo}">PT-N1</td>
				<td class="px-4 py-2" th:text="${p.nombre}">Producto</td>
				<td class="px-4 py-2" th:text="${p.categoria}">Ropa</td>
				<td class="px-4 py-2" th:text="${p.precio}">99.99</td>
				<td class="px-4 py-2" th:text="${p.stock}">15</td>
				<td class="px-4 py-2 space-x-2">
					<a th:href="@{/productos/editar(id=${p.id})}" class="text-blue-500 hover:underline">âœï¸ Editar</a>
					<a th:href="@{/productos/eliminar(id=${p.id})}" class="text-red-500 hover:underline" onclick="return confirm('Â¿EstÃ¡s seguro de eliminar este producto?');">ğŸ—‘ï¸ Eliminar</a>
				</td>
			</tr>
			</tbody>
		</table>
	</div>
</main>
</body>
</html>